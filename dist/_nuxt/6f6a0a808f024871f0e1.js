(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{812:function(e,t,r){"use strict";var n=r(0),l=r.n(n),o={props:["goals"],data:function(){return{columns:["title","start","end","progress","id"],options:{headings:{title:"Title",start:"Start",end:"End",progress:"Progress",id:""},sortable:["title","start","end","progress"],filterable:["title","start","end","completed"]}}},methods:{parseDate:function(e){return l()(e).format("ll")},parseDateTime:function(e){return l()(e).format("lll")},getPercentage:function(e){return 100*e+"%"},progressColor:function(progress){return progress<.25?"progress is-danger":progress<.5?"progress is-warning":progress<.75?"progress is-success":progress<1?"progress is-primary":"progress is-link"},getKpiText:function(e){var output="";switch(e.change){case"__2":case"_":output+="Reduce "+e.metric+" by "+e.target;break;default:output+="Have "+e.metric+" "+e.target}return output}}},c=r(29),component=Object(c.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-client-table",{attrs:{data:e.goals,columns:e.columns,options:e.options},scopedSlots:e._u([{key:"start",fn:function(t){return r("span",{},[e._v("\n      "+e._s(e.parseDate(t.row.start))+"\n    ")])}},{key:"end",fn:function(t){return r("span",{},[e._v("\n      "+e._s(e.parseDate(t.row.end))+"\n    ")])}},{key:"published",fn:function(t){return r("span",{},[e._v("\n      "+e._s(e.parseDateTime(t.row.published))+"\n    ")])}},{key:"progress",fn:function(t){return r("span",{},[r("progress",{class:e.progressColor(t.row.progress),attrs:{max:"1",title:e.getPercentage(t.row.progress)},domProps:{value:t.row.progress}},[e._v("\n        "+e._s(e.getPercentage(t.row.progress))+"\n      ")])])}},{key:"id",fn:function(t){return r("span",{},[r("nuxt-link",{attrs:{to:"/goals/"+t.row.id+"/view/"}},[e._v("View")])],1)}},{key:"child_row",fn:function(t){return r("div",{},[r("b",[e._v("Description")]),e._v(" "),r("p",[e._v(e._s(t.row.description))]),e._v(" "),r("b",[e._v("Key Performance Indicators")]),e._v(" "),r("ul",e._l(t.row.kpiSet,function(n){return r("li",[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-two-fifth"},[e._v("\n            "+e._s(e.getKpiText(n))+"\n          ")]),e._v(" "),r("div",{staticClass:"column is-two-fifth"},[r("progress",{class:e.progressColor(n.progress),attrs:{max:"1",title:e.getPercentage(n.progress)},domProps:{value:n.progress}},[e._v("\n                "+e._s(e.getPercentage(n.progress))+"\n              ")])]),e._v(" "),r("div",{staticClass:"column is-one-fifth"},[t.row.owner?r("a",{staticClass:"button is-info is-small"},[e._v("Post update")]):e._e()])])])}),0)])}}])})],1)},[],!1,null,null,null);t.a=component.exports},815:function(e,t,r){var content=r(830);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(53).default)("6740b554",content,!0,{sourceMap:!1})},829:function(e,t,r){"use strict";var n=r(815);r.n(n).a},830:function(e,t,r){(e.exports=r(52)(!1)).push([e.i,"@media (min-width:768px){#team-goals{margin:1rem}}#team-goals .panel-block{justify-content:space-between}#team-goals .panel-block .select{max-width:70%}",""])},866:function(e,t,r){"use strict";r.r(t);r(35),r(36),r(24);var n=r(0),l=r.n(n),o={components:{GoalTable:r(812).a},computed:{allGoals:function(){return this.$store.getters["goals/GOALS"]},levels:function(){var e=[];if(this.$store.getters["organisation/ORGANISATION"].levelSet){for(var t=this.$store.getters["organisation/ORGANISATION"].levelSet,i=0;i<t.length;i++){var r=t[i];e.push({id:r.id,number:r.number,label:r.label,value:""})}return e}return[]}},data:function(){return{years:[2019,2018,2017,2016,2015],selectedYear:"",maxLevel:1}},methods:{getTeams:function(e,t){var r,n=!0,l=!1,o=void 0;try{for(var c,v=this.levels[Symbol.iterator]();!(n=(c=v.next()).done);n=!0){var d=c.value;d.number==t-1&&(r=d.value)}}catch(e){l=!0,o=e}finally{try{n||null==v.return||v.return()}finally{if(l)throw o}}return this.$store.getters["organisation/TEAMS"](e,r)},timeSelected:function(){this.$forceUpdate()},teamSelected:function(e,t){t.length?(goals,this.maxLevel++):1!=this.maxLevel&&(this.maxLevel=e),this.$forceUpdate()},goals:function(){var e=this,t=this.allGoals,r=null,n=!0,o=!1,c=void 0;try{for(var v,d=this.levels[Symbol.iterator]();!(n=(v=d.next()).done);n=!0){var f=v.value;if(!f.value)break;r=f.value}}catch(e){o=!0,c=e}finally{try{n||null==d.return||d.return()}finally{if(o)throw c}}if(r&&(t=t.filter(function(e){return null!=e.team&&e.team.id==r})),this.selectedYear){l()().year(this.selectedYear).month(0).date(1);t=t.filter(function(t){if(l()(t.start).year()==e.selectedYear||l()(t.start).isAfter()==e.selectedYear)return!0})}return console.log(this.selectedYear),t}}},c=(r(829),r(29)),component=Object(c.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns",attrs:{id:"team-goals"}},[r("div",{staticClass:"column is-one-fifth"},[r("nav",{staticClass:"panel"},[r("p",{staticClass:"panel-heading"},[e._v("\n      Filters\n    ")]),e._v(" "),r("div",{staticClass:"panel-block"},[r("label",[e._v("\n        Year\n      ")]),e._v(" "),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedYear,expression:"selectedYear"}],on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedYear=t.target.multiple?r:r[0]},function(t){return e.timeSelected()}]}},[r("option",{attrs:{value:""}},[e._v(" All Years ")]),e._v(" "),e._l(e.years,function(t){return r("option",[e._v(e._s(t))])})],2)])]),e._v(" "),e._l(e.levels,function(t){return t.number<=e.maxLevel?r("div",{staticClass:"panel-block"},[r("label",[e._v("\n        "+e._s(t.label)+"\n      ")]),e._v(" "),r("div",{staticClass:"select"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"level.value"}],on:{change:[function(r){var n=Array.prototype.filter.call(r.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,"value",r.target.multiple?n:n[0])},function(r){return e.teamSelected(t.number,t.value)}]}},[r("option",{attrs:{value:""}},[e._v("All "+e._s(t.label))]),e._v(" "),e._l(e.getTeams(t.id,t.number),function(t){return r("option",{domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})],2)])]):e._e()})],2)]),e._v(" "),r("div",{staticClass:"column"},[r("goal-table",{attrs:{goals:e.goals()}})],1)])},[],!1,null,null,null);t.default=component.exports}}]);